<ion-content class="ion-padding">
  <ng-container *ngIf="farms.length > 0; else noFarms">
    <div class="farm-title">Fazendas</div>
    <ion-list class="list-container">
      <ion-item *ngFor="let farm of farms" (click)="openFarm(farm)">
        <ion-label>{{ farm.farmName }}</ion-label>
        <ion-icon class="item-icon trash-icon" name="trash-outline" (click)="deleteFarm(farm)"></ion-icon>
      </ion-item>
    </ion-list>
    <div class="register-buttons-container">
      <div class="register-farm-container">
        <ion-button color="primary" (click)="disableFarmsListAndShowNoFarms()" fill="outline" shape="round" class="new-farm">Registrar uma nova fazenda</ion-button>
      </div>
    </div>
  </ng-container>
  <ng-template #noFarms>
    <div class="no-farms-container">
    <div class="spanNoFarm" *ngIf="farms.length == 0">Você não possui uma fazenda, crie uma!</div>
    <div class="form-container" *ngIf="showNoFarms">
      <div class="farm-title">Fazendas</div>
      <form [formGroup]="farmForm" (ngSubmit)="createFarm()">
        <ion-item>
          <ion-label position="stacked">Nome da Fazenda</ion-label>
          <ion-input formControlName="farmName" type="text"></ion-input>
        </ion-item>
        <!-- Mensagens de erro -->
        <span *ngIf="farmForm.get('farmName')?.touched && farmForm.get('farmName')?.errors?.['required']">O nome da fazenda é obrigatório!</span>
        <span *ngIf="farmForm.get('farmName')?.dirty && farmForm.get('farmName')?.errors?.['minlength']">O nome da fazenda deve ter no mínimo 5 caracteres</span>
        <!-- Mensagens de erro -->
        <ion-item>
          <ion-label position="stacked">Localização da Fazenda</ion-label>
          <ion-input formControlName="farmLocation" type="text"></ion-input>
        </ion-item>
        <!-- Mensagens de erro -->
        <span *ngIf="farmForm.get('farmLocation')?.touched && farmForm.get('farmLocation')?.errors?.['required']">A Localização da fazenda é obrigatória!</span>
        <span *ngIf="farmForm.get('farmLocation')?.dirty && farmForm.get('farmLocation')?.errors?.['minlength']">A Localização da fazenda deve ter no mínimo 5 caracteres</span>
        <!-- Mensagens de erro -->
        <ion-button type="submit" expand="block" color="white" class="createFarmButton">Criar Fazenda</ion-button>
      </form>
    </div>
  </div>
  </ng-template>

  <div class="buttons-container">
    <ion-button color="white">
      <ion-icon slot="icon-only" name="leaf-outline" class="leaf"></ion-icon>
    </ion-button>
    <ion-button color="white" (click)="goToProfilePage()">
      <ion-icon slot="icon-only" name="person-circle-outline" class="person"></ion-icon>
    </ion-button>
  </div>
</ion-content>
