<ion-content *ngIf="userData">
  <div class="floating-profile">

    <div class="profile-title">Perfil</div>

    <div class="profile-photo" (click)="fileInput.click()">
      <input type="file" accept="image/*" (change)="uploadPhoto($event)" #fileInput style="display:none;">
      <img [src]="userData.photoURL ? userData.photoURL : 'assets/default-avatar.png'">
    </div>

    <form [formGroup]="profileForm" (ngSubmit)="submitForm()">

      <ion-label>Nome:</ion-label>
      <ion-input type="text" formControlName="name"></ion-input>
      <span class="error-text" *ngIf="profileForm.get('name')?.touched && profileForm.get('name')?.errors?.['required']">Nome obrigatório!</span>
      <span class="error-text" *ngIf="profileForm.get('name')?.dirty && profileForm.get('name')?.errors?.['minlength']">Min. 3 caracteres</span>
      <br>

      <ion-label>Email:</ion-label>
      <ion-input type="email" [value]="userData.email" disabled></ion-input>
      <br>

      <ion-label>Telefone:</ion-label>
      <ion-input type="tel" formControlName="number"></ion-input>
      <span class="error-text" *ngIf="profileForm.get('number')?.touched && profileForm.get('number')?.errors?.['required']">Telefone obrigatório!</span>
      <span class="error-text" *ngIf="profileForm.get('number')?.dirty && profileForm.get('number')?.errors?.['minlength']">Min. 9 dígitos</span>
      <span class="error-text" *ngIf="profileForm.get('number')?.dirty && profileForm.get('number')?.errors?.['maxlength']">Máx. 13 dígitos</span>
      <br>

      <ion-button color="danger" expand="block" class="logoutBtn" (click)="logOut()">
        <ion-icon name="log-out-outline"></ion-icon> Sair
      </ion-button>

      <ion-button expand="block" class="saveBtn" type="submit" [disabled]="profileForm.pristine || profileForm.invalid">
        <ion-icon name="checkmark-outline"></ion-icon> Salvar
      </ion-button>

    </form>

  </div>

  <ion-footer>
    <ion-tab-bar slot="bottom">
      <ion-tab-button tab="farms" (click)="goToFarmPage()">
        <ion-icon name="leaf-outline"></ion-icon>
        Fazendas
      </ion-tab-button>

      <ion-tab-button disabled class="fab-center"></ion-tab-button>

      <ion-tab-button tab="profile" class="tab-selected">
        <ion-icon name="person-circle-outline"></ion-icon>
        Perfil
      </ion-tab-button>
    </ion-tab-bar>
  </ion-footer>
</ion-content>
